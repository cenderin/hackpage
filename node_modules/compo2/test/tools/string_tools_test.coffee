[expect, sinon] = require('../test_helper')
StringTools = require '../../src/tools/string_tools.coffee'


describe 'StringTools', ->

  describe 'ends_with', ->

    it 'returns true if the string ends with the given expression', ->
      expect(StringTools.ends_with '123', '3').to.be.true
      expect(StringTools.ends_with '123', '23').to.be.true

    it 'returns true for a match of the whole string', ->
      expect(StringTools.ends_with '123', '123').to.be.true

    it 'returns false if the given string does not match', ->
      expect(StringTools.ends_with '123', '4').to.be.false

    it 'returns false if the given end string matches, but is longer than the actual string', ->
      expect(StringTools.ends_with '123', '0123').to.be.false

    it 'assumes that every string ends with the empty string', ->
      expect(StringTools.ends_with '123', '').to.be.true


  describe 'partition', ->

    it 'returns the before part, the match, and the after part of the first match', ->
      expect(StringTools.partition 'one two three', /two/).to.eql ['one ', 'two', ' three']

    describe 'non-match', ->
      it 'returns the whole string in the first result, the rest is empty strings', ->
        expect(StringTools.partition 'one two three', /four/).to.eql ['one two three', '', '']

    it 'works with empty strings', ->
      expect(StringTools.partition '', /foo/).to.eql ['', '', '']


