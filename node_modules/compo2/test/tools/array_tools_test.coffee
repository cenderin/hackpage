[expect, sinon] = require('../test_helper')
ArrayTools = require '../../src/tools/array_tools.coffee'


describe 'ArrayTools', ->

  describe 'any', ->

    is_positive = (element) -> element > 0
    always_true = (element) -> true

    describe "empty array", ->
      it "returns false", ->
        expect(ArrayTools.any [], is_positive).to.be.false
        expect(ArrayTools.any [], always_true).to.be.false

    describe "normal array", ->
      it "correctly determines if all are positive", ->
        expect(ArrayTools.any [-1,0,1], is_positive).to.be.true
        expect(ArrayTools.any [-1,-2,-3], is_positive).to.be.false

    describe "undefined parameter", ->
      it "uses the function that simply returns the element", ->
        expect(ArrayTools.any [true, false]).to.be.true
        expect(ArrayTools.any [false, false]).to.be.false

    describe "empty array with undefined parameter", ->
      it "returns false", ->
        expect(ArrayTools.any []).to.be.false


  describe 'detect', ->

    it 'returns the first array element for which the given checker method returns truthy', ->
      result = ArrayTools.detect ['1234', 'abc', '123'], (element) -> element.length == 3
      expect(result).to.equal 'abc'

    it 'returns undefined if no element matches', ->
      result = ArrayTools.detect ['1234', 'abc', '123'], (element) -> false
      expect(result).to.be.undefined



